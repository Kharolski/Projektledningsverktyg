<UserControl x:Class="Projektledningsverktyg.Views.RecipeBook.Windows.Components.RecipeInstructionsSection"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Projektledningsverktyg.Views.RecipeBook.Windows.Components"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">


    <StackPanel Margin="0,20,0,0">
        <TextBlock Text="Instruktioner" 
              FontSize="18" 
              FontWeight="SemiBold" 
              Margin="0,0,0,15"/>

        <!-- Current Step Input -->
        <Grid Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="1." 
                  FontWeight="Bold" 
                  Margin="0,0,10,0"/>
            <TextBox Grid.Column="1" 
                    MinHeight="60"
                     Margin="0,0,10,0"
                    TextWrapping="Wrap"
                    AcceptsReturn="True"/>
        </Grid>

        <!-- Add Step Button -->
        <Button Content="+ Lägg till steg" 
            HorizontalAlignment="Right"
            Margin="0,0,10,20"
            Padding="10,5"
            Background="#4CAF50"
            Foreground="White"/>

        
        
        
        <!-- Steps List -->
        <ItemsControl>
            <ItemsControl.Template>
                <ControlTemplate>
                    <Grid>
                        <TextBlock Text="Inga steg för kokning tillagda" 
                          Foreground="#666666"
                          HorizontalAlignment="Center"
                          Margin="0,20">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Items.Count, 
                                           RelativeSource={RelativeSource 
                                           AncestorType=ItemsControl}}" 
                                           Value="0">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                        <ItemsPresenter/>
                    </Grid>
                </ControlTemplate>
            </ItemsControl.Template>

            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="{Binding StepNumber, StringFormat='{}{0}.'}" 
                          FontWeight="Bold" 
                          Margin="0,0,10,0"/>
                        <TextBlock Grid.Column="1" 
                          Text="{Binding Instructions}"
                          TextWrapping="Wrap"/>
                        <Button Grid.Column="2" 
                        Content="✕" 
                        Width="30"
                        Height="30"
                        Margin="10,0,0,0"/>
                    </Grid>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

    </StackPanel>

</UserControl>
